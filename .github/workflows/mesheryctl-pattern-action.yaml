name: Mesheryctl Pattern Action
on:
  push:
    branches:
      - 'master'
  # if manually triggering, provide a provider token yourself
  workflow_dispatch:
    inputs:
      provider_token:
        description: "Meshery auth token"
        required: true

jobs:
  job1:
    name: Mesheryctl Pattern Actions 
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v1
      - name: Install hub
          uses: geertvdc/setup-hub@master
      - name: run hub commands
          env:
            GITHUB_USER: ${{ secrets.GH_USER }}
            GITHUB_TOKEN: ${{ secrets.GH_ACCESS_TOKEN }}
          run: |
              hub release
      - name: mesheryctl pattern action
        uses: sayantan1413/mesheryctl-service-mesh-patterns-action@master
        with:
          provider_token: ${{ github.event.inputs.provider_token }}
      